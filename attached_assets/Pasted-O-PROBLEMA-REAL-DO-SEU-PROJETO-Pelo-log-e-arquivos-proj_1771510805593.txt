O PROBLEMA REAL DO SEU PROJETO

Pelo log e arquivos:

âœ… projeto fullstack
âœ… Express backend
âœ… Vite frontend
âŒ configuraÃ§Ã£o hÃ­brida do Replit
âŒ Render nÃ£o entende setup automÃ¡tico do Replit

Resultado:

ðŸ‘‰ build roda
ðŸ‘‰ mas nÃ£o gera servidor vÃ¡lido em produÃ§Ã£o

âœ… PASSO 1 â€” Estrutura correta (IMPORTANTE)

Seu projeto precisa ficar assim:

saas-clinic/
â”‚
â”œâ”€â”€ client/        â† React
â”œâ”€â”€ server/        â† Express API
â”œâ”€â”€ shared/
â”œâ”€â”€ dist/          â† gerado automaticamente
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json

âœ… PASSO 2 â€” tsconfig obrigatÃ³rio

No root:

{
  "compilerOptions": {
    "target": "ES2022",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "outDir": "dist",
    "rootDir": ".",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "types": ["node"]
  },
  "include": ["server/**/*", "shared/**/*"]
}


âš ï¸ REMOVA:

"noEmit": true

âœ… PASSO 3 â€” package.json CORRETO (Render)

Substitua os scripts:

"scripts": {
  "dev": "tsx server/index.ts",
  "build": "npm install && npm run build:client && npm run build:server",
  "build:client": "vite build",
  "build:server": "tsc",
  "start": "node dist/server/index.js"
}

âœ… PASSO 4 â€” server/index.ts (O ERRO MAIS COMUM)

Seu Express PRECISA usar a PORT do Render:

const PORT = process.env.PORT || 3000;

app.listen(PORT, "0.0.0.0", () => {
  console.log("Servidor rodando");
});


Se nÃ£o tiver 0.0.0.0:

âŒ Render nunca abre o site.

âœ… PASSO 5 â€” Servir o Frontend no Express

Depois do build do Vite:

import path from "path";

app.use(express.static(path.join(process.cwd(), "dist/client")));

app.get("*", (_, res) => {
  res.sendFile(path.join(process.cwd(), "dist/client/index.html"));
});

âœ… PASSO 6 â€” ConfiguraÃ§Ã£o do Render

No painel Render:

Create Web Service
Repository

seu GitHub

Build Command
npm run build

Start Command
npm start

Environment

Node Version:

22

âœ… PASSO 7 â€” VariÃ¡veis obrigatÃ³rias

Adicionar no Render:

NODE_ENV=production


(se usar banco)

DATABASE_URL=...

âœ… PASSO 8 â€” Commit obrigatÃ³rio

Depois de tudo:

git add .
git commit -m "fix render deploy"
git push


Render vai rebuildar automaticamente.